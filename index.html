<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Jasongram</title>
        <style>
            body {
                text-align: center;
                background-color: rgb(173, 35, 173);
                color: rgb(0, 0, 0);
            }
        </style>
            <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SFZZZC8G87"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SFZZZC8G87');
</script>
    </head>



    <body>
        <img src="logo_banner.png" , width="50%" />
        <h1>Welcome to Jasongram!</h1>
        <center>
            <p><span class="name"></span></p>
            <p><img class="image" width="100" height="100" /></p>
            <p><span class="age"></span></p>
            <p><span class="bio"></span></p>
            <p><span class="pronouns"></span></p>
            <h4>Hardcoded IDs</h4>
            <p>JZbU8EL0KHQYqG58Q8g3OePZPoY2</p>
            <p>YzZe1bxjonYv4Nt7ZnMmcSCMhOe2</p>
            <input class="id_input" type="text" placeholder="Enter ID" />
            <button class="search_button">Search</button>
        </center>

        <iframe
            src="https://thunkable.site/w/hmLa1PjxaNzJ5EsJ9rKJ9"
            title="Jasongram ProfileApp"
            ;
            style="height: 750px; width: 25%; float: bottom"
        ></iframe>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";

            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyAqv40SimSz3RsOpkRts4lthyKLsBKDOyQ",
                authDomain: "profileapp-72019.firebaseapp.com",
                databaseURL:
                    "https://profileapp-72019-default-rtdb.firebaseio.com",
                projectId: "profileapp-72019",
                storageBucket: "profileapp-72019.appspot.com",
                messagingSenderId: "100764384447",
                appId: "1:100764384447:web:1e1dfbb6c02a931b571a0a",
            };

            //Initialize Firebase
            const app = initializeApp(firebaseConfig);

            import {
                getDatabase,
                ref,
                get,
                set,
                child,
                update,
                remove,
            } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

            const db = getDatabase();

            var userName = document.querySelector(".name");
            var userAge = document.querySelector(".age");
            var userBio = document.querySelector(".bio");
            var userPronouns = document.querySelector(".pronouns");
            var userImage = document.querySelector(".image");
            var userInputID = document.querySelector(".id_input");
            var userSearchButton = document.querySelector(".search_button");

            function FindData() {
                const dbref = ref(db);

                get(child(dbref, userInputID.value))
                    .then((snapshot) => {
                        if (snapshot.exists()) {
                            userName.innerHTML = "Name: " + snapshot.val().name;
                            userBio.innerHTML = "Bio: " + snapshot.val().bio;
                            userAge.innerHTML = "Age: " + snapshot.val().age;
                            userPronouns.innerHTML =
                                "Pronouns: " + snapshot.val().pronouns;
                            userImage.src = snapshot.val().image;
                        } else {
                            alert("No data found");
                        }
                    })
                    .catch((error) => {
                        alert(error);
                    });
            }
            userSearchButton.onclick = FindData;
        </script>
    </body>
</html>
